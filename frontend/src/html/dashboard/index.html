<!doctype html>
<html lang="en">
  <!-- [Head] start -->

  <head>
    @@include('../layouts/head-page-meta.html', {'title': 'Analytics Dashboard'})
    <!-- map-vector css -->
    <link rel="stylesheet" href="../assets/css/plugins/jsvectormap.min.css" />
    @@include('../layouts/head-css.html')
  </head>
  <!-- [Head] end -->
  <!-- [Body] Start -->

  <body @@bodySetup>
    @@include('../layouts/layout-vertical.html')

    <!-- [ Main Content ] start -->
    <div class="pc-container">
      <div class="pc-content">
        @@include('../layouts/breadcrumb.html', {'breadcrumb-item': 'Dashboard', 'breadcrumb-item-active': 'Analytics'})
        <!-- [ Main Content ] start -->
        <div class="row">
          <div id="mb-publicidade--dashboard"></div>
        </div>
        <!-- [ Main Content ] end -->
      </div>
    </div>
    <!-- [ Main Content ] end -->
    @@include('../layouts/footer-block.html') @@include('../layouts/customizer.html')
    <!-- [Page Specific JS] start -->
    <!-- apexcharts js -->
    <script src="../assets/js/plugins/apexcharts.min.js"></script>
    
    <!-- Vector maps -->
    <script src="../assets/js/plugins/jsvectormap.min.js"></script>
    <script src="../assets/js/plugins/world.js"></script>
    
    <!-- Enhanced Dashboard Widgets -->
    <script src="../assets/js/widgets/world-low.js"></script>
    <script src="../assets/js/widgets/device-chart.js"></script>
    <script src="../assets/js/widgets/happy-sad-ball.js"></script>
    
    <!-- Custom Enhanced Dashboard JS -->
    <script>
      // Enhanced KPI Cards with mini charts
      const kpiCharts = {
        totalRevenue: {
          chart: {
            type: 'line',
            width: 80,
            height: 50,
            sparkline: { enabled: true }
          },
          series: [{
            data: [31, 40, 28, 51, 42, 85, 77]
          }],
          stroke: { width: 2, colors: ['#ffffff'] },
          tooltip: { enabled: false }
        },
        activeUsers: {
          chart: {
            type: 'area',
            width: 80,
            height: 50,
            sparkline: { enabled: true }
          },
          series: [{
            data: [11, 32, 45, 32, 34, 52, 41]
          }],
          fill: { colors: ['#ffffff'], opacity: 0.3 },
          stroke: { colors: ['#ffffff'] },
          tooltip: { enabled: false }
        },
        orders: {
          chart: {
            type: 'bar',
            width: 80,
            height: 50,
            sparkline: { enabled: true }
          },
          series: [{
            data: [47, 45, 54, 38, 56, 24, 65]
          }],
          colors: ['#ffffff'],
          tooltip: { enabled: false }
        },
        conversion: {
          chart: {
            type: 'line',
            width: 80,
            height: 50,
            sparkline: { enabled: true }
          },
          series: [{
            data: [15, 75, 47, 65, 55, 70, 85]
          }],
          stroke: { width: 2, colors: ['#ffffff'], curve: 'smooth' },
          tooltip: { enabled: false }
        }
      };

      // Render KPI charts
      Object.keys(kpiCharts).forEach(chartId => {
        const element = document.querySelector(`#${chartId.replace(/([A-Z])/g, '-$1').toLowerCase()}-chart`);
        if (element) {
          new ApexCharts(element, kpiCharts[chartId]).render();
        }
      });

      // Real-time Analytics Chart
      const realTimeOptions = {
        chart: {
          type: 'area',
          height: 350,
          animations: { enabled: true, easing: 'linear', dynamicAnimation: { speed: 1000 } },
          toolbar: { show: false }
        },
        series: [{
          name: 'Sessions',
          data: [31, 40, 28, 51, 42, 85, 77, 95, 87, 73, 69, 85]
        }, {
          name: 'Page Views',
          data: [87, 76, 65, 89, 95, 76, 89, 67, 78, 95, 87, 92]
        }],
        xaxis: {
          categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        colors: ['#4680ff', '#04a9f5'],
        fill: { opacity: 0.3 },
        stroke: { curve: 'smooth' }
      };

      if (document.querySelector('#real-time-chart')) {
        new ApexCharts(document.querySelector('#real-time-chart'), realTimeOptions).render();
      }

      // Performance Metrics Charts
      const performanceCharts = {
        salesPerformance: {
          chart: { type: 'radialBar', height: 120 },
          series: [87],
          colors: ['#4680ff'],
          plotOptions: {
            radialBar: {
              hollow: { size: '70%' },
              dataLabels: { show: false }
            }
          }
        },
        customerSatisfaction: {
          chart: { type: 'donut', height: 120 },
          series: [4.8, 1.2],
          colors: ['#2ed8b6', '#e9ecef'],
          plotOptions: {
            pie: {
              donut: { size: '70%' }
            }
          },
          legend: { show: false },
          dataLabels: { enabled: false }
        },
        systemUptime: {
          chart: { type: 'radialBar', height: 120 },
          series: [99.9],
          colors: ['#ffb64d'],
          plotOptions: {
            radialBar: {
              hollow: { size: '70%' },
              dataLabels: { show: false }
            }
          }
        },
        apiResponse: {
          chart: { type: 'line', height: 120, sparkline: { enabled: true } },
          series: [{
            data: [247, 251, 245, 249, 243, 247, 250, 248, 247]
          }],
          stroke: { curve: 'smooth', colors: ['#04a9f5'] }
        }
      };

      Object.keys(performanceCharts).forEach(chartId => {
        const element = document.querySelector(`#${chartId.replace(/([A-Z])/g, '-$1').toLowerCase()}`);
        if (element) {
          new ApexCharts(element, performanceCharts[chartId]).render();
        }
      });

      // Revenue Trends Chart
      const revenueTrendsOptions = {
        chart: {
          type: 'line',
          height: 300,
          toolbar: { show: false }
        },
        series: [{
          name: 'Actual Revenue',
          data: [44, 55, 57, 56, 61, 58, 63, 60, 66, 75, 85, 89]
        }, {
          name: 'Forecast',
          data: [null, null, null, null, null, null, null, null, 66, 78, 88, 95]
        }, {
          name: 'Target',
          data: [50, 60, 65, 70, 75, 80, 85, 90, 95, 100, 105, 110]
        }],
        xaxis: {
          categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        colors: ['#4680ff', '#2ed8b6', '#ffb64d'],
        stroke: {
          curve: 'smooth',
          dashArray: [0, 5, 0]
        },
        fill: {
          type: 'solid',
          opacity: 0.1
        },
        markers: {
          size: 4,
          strokeWidth: 2,
          strokeColors: '#fff',
          hover: {
            size: 6
          }
        },
        legend: {
          show: true,
          position: 'top',
          horizontalAlign: 'right'
        },
        grid: {
          borderColor: '#e9ecef',
          strokeDashArray: 3
        }
      };

      if (document.querySelector('#revenue-trends')) {
        new ApexCharts(document.querySelector('#revenue-trends'), revenueTrendsOptions).render();
      }

      // CPU and Memory Usage Charts
      const systemCharts = {
        cpuUsage: {
          chart: { type: 'radialBar', height: 60, width: 60 },
          series: [67],
          colors: ['#f44336'],
          plotOptions: {
            radialBar: {
              hollow: { size: '50%' },
              dataLabels: { show: false }
            }
          }
        },
        memoryUsage: {
          chart: { type: 'radialBar', height: 60, width: 60 },
          series: [82],
          colors: ['#ff9800'],
          plotOptions: {
            radialBar: {
              hollow: { size: '50%' },
              dataLabels: { show: false }
            }
          }
        }
      };

      Object.keys(systemCharts).forEach(chartId => {
        const element = document.querySelector(`#${chartId.replace(/([A-Z])/g, '-$1').toLowerCase()}`);
        if (element) {
          new ApexCharts(element, systemCharts[chartId]).render();
        }
      });

      // Timeline styles for activity feed
      const style = document.createElement('style');
      style.textContent = `
        .timeline {
          position: relative;
          padding-left: 20px;
        }
        .timeline::before {
          content: '';
          position: absolute;
          left: 10px;
          top: 0;
          bottom: 0;
          width: 2px;
          background: #e9ecef;
        }
        .timeline-item {
          position: relative;
          margin-bottom: 20px;
        }
        .timeline-marker {
          position: absolute;
          left: -26px;
          top: 5px;
          width: 12px;
          height: 12px;
          border-radius: 50%;
          border: 2px solid #fff;
          box-shadow: 0 0 0 2px #e9ecef;
        }
        .timeline-content {
          background: #f8f9fa;
          padding: 15px;
          border-radius: 8px;
          border-left: 3px solid #4680ff;
        }
      `;
      document.head.appendChild(style);
    </script>
    <!-- [Page Specific JS] end -->
    @@include('../layouts/footer-js.html')
  </body>
  <!-- [Body] end -->
</html>

